<!doctype html>
<html>
<head>
  <meta charset="utf-8">
</head>
<body>
  <script src="./build/pushy-sdk.js"></script>
  <!--<script src="https://sdk.pushy.me/web/1.0.0/pushy-sdk.js"></script>-->

  <script type="text/javascript">
    // Register device for push notifications
    Pushy.register({ appId: '{your-app-id}' }).then(function (deviceToken) {
      // Print device token to console
      console.log('Pushy device token: ' + deviceToken);

      // Optionally subscribe the device to a topic
      Pushy.subscribe('news');

      // Send the token to your backend server via an HTTP GET request
      //fetch('https://your.api.hostname/register/device?token=' + deviceToken);

      // Succeeded, optionally do something to alert the user
    }).catch(function (err) {
      // Handle registration errors
      console.error('Registration failed:', err);
    });

    // Handle push notifications (only when web page is open)
    Pushy.setNotificationListener(function (data) {
        // Print notification payload data
        console.log('Received notification: ' + JSON.stringify(data));

        // Attempt to extract the "message" property from the payload: {"message":"Hello World!"}
        let message = data.message || 'Test notification';

        // Display an alert with message sent from server
        alert('Received notification: ' + message);
    });
  </script>
</body>
</html>